# 《Unity Shader 入门精要》
## 第二章 渲染流水线
- 概念流水线：应用阶段->几何阶段->光栅化阶段
    - 应用阶段：CPU处理，主要负责准备渲染所需的各种数据，包括图元数据（顶点、索引、UV坐标、图元类型等）、渲染状态（深度测试、Alpha测试、模板测试等）、Shader程序等，同时也额外会执行粗颗粒度的culling（裁剪）操作；
    - 几何阶段：GPU处理，将三维顶点数据转换为屏幕空间的二维顶点数据，数据包括屏幕空间下的顶点坐标、深度值，还可能额外包括法线、切线、颜色等信息；
    - 光栅化阶段：GPU处理，将几何阶段输出的渲染图元进行逐像素处理（插值），最终输出其颜色值（也可以抛弃像素）
- CPU和GPU之间通信（应用阶段流程）
    - 将数据加载到显存
    - 设置渲染状态
    - 调用DrawCall
- GPU流水线：几何阶段->光栅化阶段，可配置/可编程
    - 几何阶段：
        - 输入：顶点数据
        - 流水线阶段：顶点着色器->曲面细分着色器->几何着色器->裁剪->屏幕映射
        - 输出：？
    - 光栅化阶段：
        - 输入数据：几何阶段的输出数据
        - 流水线阶段：三角形设置->三角形遍历->片段着色器->逐片元操作
        - 输出：屏幕图像
- CPU和GPU是如何实现并行工作：命令缓冲区
    - 类似生产者消费者模型，其中
        - CPU：生产者，生成渲染指令
        - GPU：消费者，执行渲染指令
    